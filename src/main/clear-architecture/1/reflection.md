Получилось неплохое поддерживаемое решение с рядом точек для возможного улучшения.

Плюсы
* код разбит на простые и понятные функции
* главная функция execute_commands построена таким образом, что новая команда не должна потребовать модификации окружающих команд и самой execute_commands
* использование рефлексии для автоматического сбора команд в command_map позволяет вводить новую команду в единственном месте в коде

Минусы
* использование рефлексии в то же время несколько снижает прозрачность кода и требует комментария
* состояние мутабельное
* дублируется обработка количества аргументов в командах (пока выглядит некритично)
* сейчас имена методов в коде соответствуют именам команд. Если мы хотим задать другое имя, например, для set лучше подходит set_state, то нужно доработать декоратор
* в execute_commands можно выделить отдельную функцию для выполнения одной команды